!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n["@pluginjs/global-plugin"]={})}(this,function(n){"use strict";var e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),i=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e},o=function(){return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,e){var t=[],i=!0,r=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(i=(u=a.next()).done)&&(t.push(u.value),!e||t.length!==e);i=!0);}catch(n){r=!0,o=n}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return t}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n};var a=function(){function n(t,i){var r=this;if(e(this,n),this.plugin=t,this.element=i,!window.Pj)throw new Error("Pluginjs must be required!");if(window.Pj&&window.Pj.instances[this.plugin]){if(window.Pj.instances[this.plugin].find(function(n){return n.element===r.element}))throw new Error(this.plugin+" has been installed on this element.\n\nElement: "+this.element.outerHTML+"\n");window.Pj.instances[this.plugin].push(this)}}return t(n,[{key:"getDataOptions",value:function(){return n=this.element.dataset,Object.entries(n).reduce(function(n,e){var t=o(e,2),r=t[0],a=t[1];try{var l=JSON.parse('{"data": '+a.replace(/'/g,'"')+"}").data;return u({},n,i({},r,l))}catch(e){return u({},n,i({},r,a))}},{});var n}},{key:"destroy",value:function(){var n=this;this.plugin=null,this.element=null,window.Pj&&window.Pj.instances[this.plugin]&&(window.Pj.instances[this.plugin]=window.Pj.instances[this.plugin].filter(function(e){return e.element===n.element}))}}],[{key:"of",value:function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return new(Function.prototype.bind.apply(this,[null].concat(e)))}}]),n}(),l=function(n){function i(n){e(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,window.Pj.doc));return window.Pj.instances[t.plugin]?(t.instanceId=window.Pj.instances[t.plugin].length+1,window.Pj.instances[t.plugin].push(t),t):r(t)}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(i,a),t(i,[{key:"destroy",value:function(){var n=this;window.Pj.instances[this.plugin]=window.Pj.instances[this.plugin].filter(function(e){return e!==n}),window.Pj[this.plugin]=null}}]),i}();n.default=l,Object.defineProperty(n,"__esModule",{value:!0})});
