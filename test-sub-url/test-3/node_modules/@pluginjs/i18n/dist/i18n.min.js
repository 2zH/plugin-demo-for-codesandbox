!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@pluginjs/utils"),require("@pluginjs/template")):"function"==typeof define&&define.amd?define(["exports","@pluginjs/utils","@pluginjs/template"],t):t(n["@pluginjs/i18n"]={},n["@pluginjs/utils"],n["@pluginjs/template"])}(this,function(n,t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var a=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function n(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}(),l=function(){function n(e,i){a(this,n),this.defaults=t.deepMerge(n.defaults,e),this.translations=i||{}}return i(n,[{key:"hasTranslation",value:function(n){return n in this.translations}},{key:"addTranslation",value:function(n,t){this.translations[n]?Object.assign(this.translations[n],t):this.translations[n]=t}},{key:"getTranslation",value:function(n){return this.translations[n]?this.translations[n]:{}}},{key:"instance",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,i=t.deepMerge(a.defaults,n),l=i.locale;function r(n,e){var i=a.getTranslation(e);return t.getValueByPath(i,n)}return{translate:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=r(n,s);if(void 0===o&&i.fallbacks){var u=s.split("-");if(u.length>1&&a.hasTranslation(u[0])&&(o=r(n,u[0])),void 0===o){o=r(n,!0!==i.fallbacks&&a.hasTranslation(i.fallbacks)?i.fallbacks:a.defaults.locale)}}if("[object Array]"===Object.prototype.toString.call(o)&&o.length>=2&&"string"==typeof t._number&&void 0!==t[t._number]){var f=parseInt(t[t._number],10);1===f?o=o[0]:f>1?o=o[1]:0===f&&o.length>=3&&(o=o[2])}if("string"==typeof o){var c=e.parse(o);if(!c)return o;for(var d=void 0,g=0;g<c.length;g++)void 0===t[d=c[g]]?t[d]=i.missingPlaceholder(d):null===t[d]&&(t[d]=i.nullPlaceholder(d));return e.render(o,t)}return Object(o)===o?o:'[missing "'+s+"."+n+'" translation]'},setLocale:function(n){l=n},getLocale:function(){return l}}}},{key:"setTranslations",value:function(n){this.translations=n}}]),n}();l.defaults={locale:"en",fallbacks:!0,nullPlaceholder:function(n){return"[missing {{"+n+"}} value]"},missingPlaceholder:function(n){return"[missing {{"+n+"}} value]"}},n.default=l,Object.defineProperty(n,"__esModule",{value:!0})});
