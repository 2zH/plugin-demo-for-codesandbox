!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("animejs"),require("@pluginjs/styled"),require("@pluginjs/dom"),require("@pluginjs/classes"),require("hammerjs"),require("@pluginjs/component"),require("@pluginjs/events"),require("@pluginjs/pluginjs")):"function"==typeof define&&define.amd?define(["exports","animejs","@pluginjs/styled","@pluginjs/dom","@pluginjs/classes","hammerjs","@pluginjs/component","@pluginjs/events","@pluginjs/pluginjs"],e):e(t["@pluginjs/accordion"]={},t.anime,t["@pluginjs/styled"],t["@pluginjs/dom"],t["@pluginjs/classes"],t.Hammer,t["@pluginjs/component"],t["@pluginjs/events"],t["@pluginjs/pluginjs"])}(this,function(t,e,n,i,s,r,a,o,c){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a;var l="default"in c?c.default:c,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},y=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,s=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function m(t){return Array.from(new Set(t))}function b(t){return"object"===(void 0===t?"undefined":h(t))&&(null!==t&&(!(t instanceof Set||t instanceof Map)&&!Array.isArray(t)))}function E(t,e){return b(e)&&b(t)||b(t)&&Array.isArray(e)?m(Object.keys(t).concat(Object.keys(e))).map(function(n){return[n,E(t[n],e[n])]}).reduce(function(t,e){var n=y(e,2),i=n[0],s=n[1];return v({},t,d({},i,s))},{}):b(e)&&"function"==typeof t?Object.assign(function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)},e):b(e)&&Array.isArray(t)?Object.assign([],t,e):b(t)&&"function"==typeof e?Object.assign(function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(this,n)},t):Array.isArray(e)&&Array.isArray(t)?m(Object.keys(e).concat(Object.keys(t))).map(function(n){return E(t[n],e[n])}):void 0===e?t:e}function A(t){return Object(t)===t}var O=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.reduceRight(function(t,n,i){return Array.isArray(t)&&i===e.length-1?n.apply(void 0,g(t)):n(t)},n)};return i.currylen=e[e.curylen||e.length-1].length,i};var j,N="accordion",w={READY:"ready",OPEN:"open",CLOSE:"close",RESIZE:"resize"},$={NAMESPACE:"pj-"+N,THEME:"{namespace}--{theme}",ACTIVE:"{namespace}-active",DISABLED:"{namespace}-disabled",RESPONSIVE:"{namespace}-responsive",HORIZONTAL:"{namespace}-horizontal",DROPDOWN:"{namespace}-dropdown",DROPDOWNLABEL:"{namespace}-dropdown-label",DROPDOWNLIST:"{namespace}-dropdown-list",DROPDOWNOPEN:"{namespace}-open",PANE:"{namespace}-pane",PANEHEADER:"{namespace}-pane-header",PANECONTENT:"{namespace}-pane-content",PANECONTENTINNER:"{namespace}-pane-content-inner"},D={theme:null,panelSelector:null,initialIndex:0,duration:300,horizontal:!1,multiple:!1,ajax:!1,breakWidth:null,resizeReference:"window",responsiveEffect:"easeInQuad",dropdownLabelTpl:'<a href="javascript:void(0)"></a>',responsiveDuration:300,onReady:null},I=function(){function t(e){u(this,t),this.instance=e,this.initialize()}return p(t,[{key:"initialize",value:function(){var t=this;this.horizontal=this.instance.options.horizontal,this.property=this.horizontal?"width":"height",this.initDistance(),this.instance.$panes.map(n.setStyle(d({},this.property,this.headerDistance+"px"))),this.horizontal&&(this.instance.$contentInners.map(n.setStyle({width:this.contentDistance[0]+"px"})),this.instance.$contentInners.map(function(e,i){return n.setStyle({width:t.contentDistance[i]+"px"},e)}))}},{key:"initDistance",value:function(){this.horizontal&&this.getPaneSpace(),this.getHeaderDistance(),this.getContentDistance()}},{key:"getPaneSpace",value:function(){return this.paneSpace=n.outerWidthWithMargin(this.instance.$panes[1])-n.outerWidth(this.instance.$panes[1]),this.paneSpace}},{key:"getHeaderDistance",value:function(){this.headerDistance=n.outerHeightWithMargin(this.instance.$headers[0])+2}},{key:"getContentDistance",value:function(){var t=this,e=n.contentWidth(this.instance.element),r=this.instance.size;return this.contentDistance=this.instance.$contentInners.map(function(a){return t.horizontal?e-r*t.headerDistance-(r-1)*t.paneSpace:O(n.outerHeight,O(i.parentWith,s.hasClass)(t.instance.classes.PANECONTENT))(a)}),this.contentDistance}},{key:"resetWidth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.instance.is("built")){var i=this.instance.current;this.getContentDistance(),this.horizontal&&this.instance.$contentInners.map(n.setStyle({width:this.contentDistance[0]+"px"}));for(var s=0;s<i.length;s++){var r=i[s],a={targets:this.instance.$panes[r],duration:t?1:200,easing:"linear"};a[this.property]=this.headerDistance+this.contentDistance[r],e(a)}}}},{key:"open",value:function(t,n){var i={targets:this.instance.$panes[t],duration:n?200:1,easing:"linear"};i[this.property]=this.headerDistance+this.contentDistance[t],e(i)}},{key:"close",value:function(t,n){var i={targets:this.instance.$panes[t],duration:n?200:1,easing:"linear"};i[this.property]=this.headerDistance,e(i)}}]),t}(),P=Object.prototype.toString,C={arguments:function(t){return"[object Arguments]"===P.call(t)||null!=t&&"object"===(void 0===t?"undefined":h(t))&&"callee"in t},array:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===P.call(t)},boolean:function(t){return!0===t||!1===t||"[object Boolean]"===P.call(t)},char:function(t){return this.string(t)&&1===t.length},date:function(t){return"[object Date]"===P.call(t)},domNode:function(t){return this.object(t)&&t.nodeType>0},error:function(t){return"[object Error]"===P.call(t)},function:function(t){return"[object Function]"===P.call(t)||"function"==typeof t},json:function(t){return"[object Object]"===P.call(t)},nan:function(t){return t!=t},null:function(t){return null===t},number:function(t){return!this.nan(t)&&"[object Number]"===P.call(t)},object:function(t){return Object(t)===t},emptyObject:function(t){return this.object(t)&&0==Object.getOwnPropertyNames(t).length},regexp:function(t){return"[object RegExp]"===P.call(t)},string:function(t){return"string"==typeof t||"[object String]"===P.call(t)},undefined:function(t){return void 0===t},numeric:function(t){return(this.number(t)||this.string(t))&&!this.nan(t-parseFloat(t))},percentage:function(t){return"string"==typeof t&&-1!==t.indexOf("%")},decimal:function(t){return this.number(t)&&t%1!=0},finite:function(t){return isFinite?isFinite(t):!this.infinite(t)&&!this.nan(t)},infinite:function(t){return t===1/0||t===-1/0},integer:function(t){return this.number(t)&&t%1==0},negative:function(t){return this.number(t)&&t<0},positive:function(t){return this.number(t)&&t>0}},S=function(){function t(e){u(this,t),this.instance=e,this.initialize()}return p(t,[{key:"initialize",value:function(){this.index=C.number(this.instance.current[0])?this.instance.current[0]:0,this.duration=parseInt(this.instance.options.responsiveDuration,10);var t=this.instance.options;!1!==t.breakWidth&&null!==t.breakWidth&&(this.$rely=window,"self"===t.resizeReference?this.$rely=this.instance.element:"window"!==t.resizeReference&&i.query(t.resizeReference).length>0&&(this.$rely=i.query(t.resizeReference)),this.effects={in:t.responsiveEffect,out:this.revertClass(t.responsiveEffect)},this.$rely.clientWidth>t.breakWidth||this.toggle(!0))}},{key:"revertClass",value:function(t){for(var e=t.split(" "),n=["Up","Down","In","Out","Left","Right","Top","Bottom"],i=e.length,s=["Down","Up","Out","In","Right","Left","Bottom","Top"],r="",a="",o=[],c=0;c<i;c++){for(var l=0;l<n.length;l++)new RegExp(n[l]).test(e[c])&&o.push(l);for(var h=0;h<o.length;h++)a=o[h],e[c]=e[c].replace(n[a],a);for(var u=0;u<o.length;u++)a=o[u],e[c]=e[c].replace(a,s[a]);r+=" "+e[c]}return r.trim()}},{key:"initDistance",value:function(){var t=this.instance.options.horizontal?"width":"height";this.instance.$panes.map(n.setStyle(d({transform:"translateY(-50%)",opacity:"0"},t,"auto"))),this.instance.$contentInners.map(n.setStyle(d({},t,"auto"))),n.setStyle({height:n.outerHeight(this.instance.$contentInners[this.index])+"px"},this.instance.element)}},{key:"toggle",value:function(t){t?this.build():this.destroy()}},{key:"build",value:function(){var t,e=this;if(!this.instance.is("built")){this.initDistance();var n=this.instance.classes,r=this.instance.options;this.$dropdown=i.parseHTML('<div class="'+n.DROPDOWN+'"></div>'),this.$dropdownlabel=O(i.append(this.instance.$headers[this.instance.current[0]].innerHTML),i.empty,s.addClass(n.DROPDOWNLABEL),i.parseHTML)(r.dropdownLabelTpl),this.$dropdownList=i.parseHTML('<ul class="'+n.DROPDOWNLIST+'"></ul>'),this.$dropdownItems=Array.from(Array(this.instance.size),function(t,r){var a=i.parseHTML("<li>"+e.instance.$headers[r].innerHTML+"</li>");return r===e.instance.current[0]&&s.addClass(n.ACTIVE,a),a}),(t=this.$dropdownList).append.apply(t,g(this.$dropdownItems)),this.instance.options.theme&&s.addClass(this.instance.getThemeClass(),this.$dropdown);O(function(t){return O(i.insertBefore(t),s.addClass(n.RESPONSIVE))(e.instance.element)},i.append(this.$dropdownList),i.append(this.$dropdownlabel))(this.$dropdown),this.bind(),this.instance.enter("built"),this.instance.is("initialized")&&this.instance.open(this.instance.current[0],!1)}}},{key:"destroy",value:function(){if(this.instance.is("built")){this.$dropdown.map(i.remove),this.instance.$panes.map(i.removeAttribute("style")),O(s.removeClass(this.instance.classes.RESPONSIVE),i.removeAttribute("style"))(this.instance.element),this.unbind(),this.instance.leave("built");for(var t=0;t<this.instance.$panes.length;t++)this.instance.close(t,!1);this.instance.open(this.index,!1)}}},{key:"bind",value:function(){var t=this;this.dropdown=new r(this.$dropdown),this.dropdown.on("tap",function(e){if(!t.instance.is("disabled")){var n=e.target,s=function(t){return function(e){return e.tagName===t}},r="A"===n.tagName?n:i.parentWith(s("A"),n),a="LI"===n.tagName?n:i.parentWith(s("LI"),n);r?t.switch():a&&t.labelActive(i.children(i.parent(a)).indexOf(a))}})}},{key:"unbind",value:function(){this.dropdown.destroy()}},{key:"switch",value:function(){s.toggleClass(this.instance.classes.DROPDOWNOPEN,this.$dropdown)}},{key:"labelActive",value:function(t){this.index=t,-1===this.instance.current.indexOf(t)?(this.instance.toggle(t),s.removeClass(this.instance.classes.ACTIVE,this.$dropdownItems[this.instance.prev[0]]),s.addClass(this.instance.classes.ACTIVE,this.$dropdownItems[t]),i.html(this.$dropdownItems[t].innerHTML,this.$dropdownlabel),s.removeClass(this.instance.classes.DROPDOWNOPEN,this.$dropdown)):s.removeClass(this.instance.classes.DROPDOWNOPEN,this.$dropdown)}},{key:"open",value:function(t,n){var i=this;this.index=t;var r=this.instance.$panes[t];e({targets:r,translateY:0,opacity:1,duration:n?this.duration:1,easing:this.effects.in,begin:function(){s.addClass(i.instance.classes.ACTIVE,r)}}),this.resetHeight(!n)}},{key:"close",value:function(t,i){var r=this,a=this.instance.$panes[this.instance.prev[0]];e({targets:a,translateY:"50%",opacity:0,duration:i?this.duration:1,easing:this.effects.out,complete:function(){return O(n.setStyle({transform:"translateY(-50%)"}),s.removeClass(r.instance.classes.ACTIVE))(a)}})}},{key:"resetHeight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.instance.is("built")){var i=n.outerHeight(this.instance.$contentInners[this.index]);t?n.setStyle({height:i+"px"},this.instance.element):e({targets:this.instance.element,height:i,duration:this.duration,easing:"linear"})}}},{key:"resize",value:function(){var t=this.instance.options.breakWidth;!1!==t&&null!==t&&(this.$rely.width()>t?this.toggle(!1):(this.resetHeight(!0),this.toggle(!0)))}}]),t}(),T=c.themeable()(j=c.styleable($)(j=c.eventable(w)(j=c.stateable()(j=c.register(N,{defaults:D,methods:["open","close"],dependencies:["Hammer","anime"]},{version:"0.2.1"})(j=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e);var i=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,N,t));return i.options=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(A).reduce(E)}(D,n,i.getDataOptions()),i.initClasses($),i.initStates(),i.initialize(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),p(e,[{key:"initialize",value:function(){this.initPointer(),this.processHtml(),this.ANIMATE=new I(this),this.RESPONSIVE=new S(this),this.bind(),this.open(this.current,!1),this.enter("initialized"),this.trigger(w.READY)}},{key:"initPointer",value:function(){this.$panes=i.children(this.element),this.$headers=this.$panes.map(i.find("."+this.classes.PANEHEADER)),this.$contents=this.$panes.map(i.find("."+this.classes.PANECONTENT)),this.$contentInners=this.$contents.map(i.find("."+this.classes.PANECONTENTINNER)),this.size=this.$panes.length,this.isResponsive=null!==this.options.breakWidth&&l.windowWidth<=this.options.breakWidth,this.resetData()}},{key:"resetData",value:function(){var t=this.$panes.map(i.find("."+this.classes.ACTIVE)).filter(Boolean);t.length>0?this.current=t.map(function(t,e){return e}):this.options.initialIndex?this.current=this.parseIndex(this.options.initialIndex):this.current=[0],this.prev=this.current}},{key:"processHtml",value:function(){s.addClass(this.classes.NAMESPACE,this.element),this.options.horizontal&&s.addClass(this.classes.HORIZONTAL,this.element),this.options.theme&&s.addClass(this.getThemeClass(),this.element),this.$panes.map(s.addClass(this.classes.PANE)),this.$headers.map(s.addClass(this.classes.PANEHEADER)),this.$contents.map(s.addClass(this.classes.PANECONTENT)),this.$contentInners.map(s.addClass(this.classes.PANECONTENTINNER))}},{key:"parseIndex",value:function(t){var e=[];switch(void 0===t?"undefined":h(t)){case"string":if("all"===t)for(var n=0;n<this.size;n++)e.push(n);break;case"number":e.push(t);break;case"object":Array.isArray(t)&&(e=t);break;case"undefined":e=[0]}return this.options.multiple||(e=[e[0]]),e}},{key:"bind",value:function(){var t=this;this.$panes.map(function(e,n){return o.bindEvent({type:t.eventName("click"),identity:"."+t.classes.PANEHEADER,handler:function(){return!t.is("disabled")&&(t.toggle(n),!1)}},e)})}},{key:"toggle",value:function(t){var e=this.current.includes(t);this.prev=this.current,this.options.multiple||this.close(this.prev),e?(this.current.splice(this.current.indexOf(t),1),this.close(t)):((!this.options.multiple||this.is("built")||this.options.horizontal)&&(this.current=[]),this.current.push(t),this.open(t))}},{key:"open",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!==t){var i=Array.isArray(t)?t:[t],r=this.is("built")?this.RESPONSIVE:this.ANIMATE;i.map(function(t){return e.is("built")||s.addClass(e.classes.ACTIVE,e.$panes[t]),r.open(t,n)}),this.is("initialized")&&this.trigger(w.OPEN,t)}}},{key:"close",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!==t){var i=Array.isArray(t)?t:[t],r=this.is("built")?this.RESPONSIVE:this.ANIMATE;i.forEach(function(t){r.close(t,n),e.is("built")||s.removeClass(e.classes.ACTIVE,e.$panes[t])}),this.is("initialized")&&this.trigger(w.CLOSE,t)}}},{key:"resize",value:function(){this.ANIMATE.resetWidth(!0),this.RESPONSIVE.resize(),this.trigger(w.RESIZE)}}]),e}())||j)||j)||j)||j)||j;t.default=T,Object.defineProperty(t,"__esModule",{value:!0})});
