!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@pluginjs/emitter"),require("@pluginjs/global-plugin"),require("@pluginjs/i18n"),require("@pluginjs/is"),require("@pluginjs/utils"),require("@pluginjs/events")):"function"==typeof define&&define.amd?define(["exports","@pluginjs/emitter","@pluginjs/global-plugin","@pluginjs/i18n","@pluginjs/is","@pluginjs/utils","@pluginjs/events"],t):t(e["@pluginjs/pluginjs"]={},e["@pluginjs/emitter"],e["@pluginjs/global-plugin"],e["@pluginjs/i18n"],e["@pluginjs/is"],e["@pluginjs/utils"],e["@pluginjs/events"])}(this,function(e,t,n,i,s,o,r){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},u={body:window.document.body,doc:window.document};window.Pj||(window.Pj=l({},u,{emitter:new t,plugins:{},instances:{},get windowWidth(){return window.document.documentElement.clientWidth},get windowHeight(){return window.document.documentElement.clientHeight},get:function(e){return void 0!==this.plugins[e]?this.plugins[e]:null}}));var p=window.Pj;function c(){p.emitter.emit("resize")}window.addEventListener("orientationchange",c),window.addEventListener("resize",o.throttle(c)),window.addEventListener("scroll",o.throttle(function(){p.emitter.emit("scroll")})),e.register=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var u=t.defaults,c=void 0===u?{}:u,d=t.methods,f=void 0===d?[]:d,h=t.dependencies,g=void 0===h?{}:h,v=a(t,["defaults","methods","dependencies"]);return p.instances[e]=[],p.plugins[e]=Object.assign(r,l({setDefaults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.defaults=o.deepMerge(r.defaults,e)},defaults:r.defaults?o.deepMerge(r.defaults,c):c,methods:r.methods?o.deepMerge(r.methods,f):f,dependencies:r.dependencies?o.deepMerge(r.dependencies,g):g},v),i),r.prototype.resize&&s.undefined(r.resize)&&(r.resize=function(){for(var t=p.instances[e],n=0;n<t.length;n++)t[n].resize(p.windowWidth,p.windowHeight)}),s.function(r.resize)&&p.emitter.on("resize",r.resize),r.prototype instanceof n?p[e]=r:(p[e]=function(e,t){var n=function(e){return"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):Array.of(e)}(e);if(!n.length)throw new Error("element is not exists:");var i=n.map(function(e){return r.of(e,t)});return 1===i.length?i[0]:i},Object.setPrototypeOf(p[e],r)),r}},e.stateable=function(){return function(e){e.prototype.initStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._states=e},e.prototype.is=function(e){return!!(this._states[e]&&this._states[e]>0)},e.prototype.enter=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=1},e.prototype.leave=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=0}}},e.eventable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.events=e,t.setEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.deepMerge(t.events,e)},t.prototype.eventName=function(e){if("string"!=typeof e||""===e)return"."+this.plugin;for(var t=(e=e.split(" ")).length,n=0;n<t;n++)e[n]=e[n]+"."+this.plugin;return e.join(" ")},t.prototype.eventNameWithId=function(e){if("string"!=typeof e||""===e)return"."+this.plugin+"-"+this.instanceId;for(var t=(e=e.split(" ")).length,n=0;n<t;n++)e[n]=e[n]+"."+this.plugin+"-"+this.instanceId;return e.join(" ")},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e instanceof Event){r.trigger(e,this.element);var s="on"+o.camelize(e.type);"function"==typeof this.options[s]&&this.options[s].apply(this,n)}else{r.trigger({type:this.plugin+":"+e,data:{instance:this,data:n}},this.element);var l="on"+(e=o.camelize(e));"function"==typeof this.options[l]&&this.options[l].apply(this,[].concat(n,[this]))}},t.prototype.selfEventName=function(e){return this.plugin+":"+e}}},e.themeable=function(){return function(e){e.prototype.getThemeClass=function(e,t){if(s.undefined(e)&&this.options.theme)return this.getThemeClass(this.options.theme);if(s.string(e)){if(s.undefined(t)&&(t=this.classes.THEME),e=e.split(" "),t)for(var n=0;n<e.length;n++)e[n]=t.replace("{theme}",e[n]);else for(var i=0;i<e.length;i++)e[i]=this.getClass(e[i]);return e.join(" ")}return""}}},e.styleable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.classes=e,t.setClasses=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.deepMerge(t.classes,e)},t.prototype.getClass=function(e,t,n){return s.undefined(t)?e.replace("{namespace}",this.classes.NAMESPACE||""):this.getClass(e.replace("{"+t+"}",n))},t.prototype.initClasses=function(e,t){var n=this;s.undefined(t)&&s.object(this.options.classes)&&(t=this.options.classes),this.classes=o.deepMerge({},e,function e(t){var n={};for(var i in t)Object.hasOwnProperty.call(t,i)&&(s.string(t[i])?n[i.toUpperCase()]=t[i]:s.object(t[i])&&(n[i.toUpperCase()]=e(t[i])));return n}(t||{})),s.undefined(this.classes.NAMESPACE)||(this.classes=function e(t){for(var i in t)Object.hasOwnProperty.call(t,i)&&(s.string(t[i])?t[i]=n.getClass(t[i]):s.object(t[i])&&(t[i]=e(t[i])));return t}(this.classes))}}},e.translateable=function(e){return function(t){window.deepMerge=o.deepMerge,t.I18N=new i({locale:t.defaults.locale,fallbacks:t.defaults.localeFallbacks},e),Object.assign(t.prototype,{setupI18n:function(){this.i18n=t.I18N.instance({locale:this.options.locale,fallbacks:this.options.localeFallbacks})},translate:function(e,t){return this.i18n.translate(e,t)},setLocale:function(e){return this.i18n.setLocale(e)},getLocale:function(){return this.i18n.getLocale()}})}},e.default=p,Object.defineProperty(e,"__esModule",{value:!0})});
