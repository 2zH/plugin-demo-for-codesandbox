!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@pluginjs/utils"),require("@pluginjs/component"),require("@pluginjs/classes"),require("@pluginjs/events"),require("@pluginjs/pluginjs")):"function"==typeof define&&define.amd?define(["exports","@pluginjs/utils","@pluginjs/component","@pluginjs/classes","@pluginjs/events","@pluginjs/pluginjs"],t):t(e["@pluginjs/input-mask"]={},e["@pluginjs/utils"],e["@pluginjs/component"],e["@pluginjs/classes"],e["@pluginjs/events"],e["@pluginjs/pluginjs"])}(this,function(e,t,n,i,r,u){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var o,s="inputMask",a={READY:"ready",ENABLE:"enable",DISABLE:"disable",DESTROY:"destroy",FOCUS:"focus",BLUR:"blur"},l={NAMESPACE:"pj-"+s,INPUT:"{namespace}-input"},c={type:"custom",delimiter:"",blocks:"noLimit"},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},v=function(){function e(t){f(this,e),this.__value=t}return p(e,[{key:"isNothing",value:function(){return!this.__value}},{key:"join",value:function(){return this.isNothing()?"":this.__value}},{key:"map",value:function(t){return e.of(t(this.__value))}},{key:"chain",value:function(e){return this.map(e).join()}}],[{key:"of",value:function(t){return new e(t)}}]),e}(),y=t.curry(function(e,t){return t.map(e)}),b=t.curry(function(e,t){return t.chain(e)}),m=t.curry(function(e,t){return t.reduce(e)}),g=t.curry(function(e,t){return t?[t>=2?e.filter(function(e,n){return n<t}).reduce(function(e,t){return e+t}):e[t-1],e.filter(function(e,n){return n<=t}).reduce(function(e,t){return e+t})]:[0,e[t]]}),j=t.compose(y(m(function(e,t){return e+t})),v.of),k=t.curry(function(e,t){var n=e.blocks,i=e.delimiter,r=g(n),u=j(n).join();return n.map(function(e,n){return t.slice.apply(t,d(r(n)))}).filter(Boolean).join(i).concat(t.slice(u))}),O=function(e){return e.slice(0,5)+" "+e.slice(5)},_=t.curry(function(e,t){return t.length>e?t.slice(0,e):t}),E=function(e){return!isNaN(Number(e.slice(-1)))},N=t.curry(function(e,t,n){return e.length>t+1?Number(e.slice(t,n)):Number(e[t]+"0")}),w=function(e){var t=e.slice(0,-1),n=N(e),i=n(4,6),r=n(6,8);return E(e)?i&&i>12?t:r&&r>31?t:e:t},A=t.curry(function(e,t){var n=["AM","PM"],i=t.slice(0,4),r=N(i),u=r(0,2),o=r(2,4),s="12"===e,a=t.slice(0,-1);if(!E(i))return a;if(o&&o>60)return a;if(!s)return u>24?a:t;if(u>12)return a;var l=t.slice(4).toUpperCase();return 1===l.length&&n.map(function(e){return e[0]}).find(function(e){return e===l})?i+l:2===l.length?n.find(function(e){return e===l})?i+l:i+l[0]:i}),P=u.eventable(a)(o=u.styleable(l)(o=u.stateable()(o=u.register(s,{defaults:c,methods:["enable","disable","destroy"]},{version:"0.0.1"})(o=function(e){function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,s,e));return r.options=t.deepMerge(c,n,r.getDataOptions()),r.initClasses(l),i.addClass(r.classes.INPUT,r.element),r.data="",r.initStates(),r.initialize(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,n),p(u,[{key:"initialize",value:function(){var e=this;this.bind(),this.lastValue="";var n=this.match(this.options.type),i=t.compose(b(function(e){var n=e.type,i=e.blocks,r=j(i).join();switch(n){case"time":var u=e.format,o="12"===u?r+2:r;return t.compose(A(u),_(o));case"date":return t.compose(w,_(r));default:return _(r)}}(n)),function(t){return e.data.length&&e._hasBackspace?(e._hasBackspace=!1,v.of(e.data.slice(0,-1))):v.of(e.data+t)}),r=t.compose(b(function(e){switch(e.type){case"time":return t.compose(O,k(e));default:return k(e)}}(n)),v.of);this.onChange=function(t){var n=t.target.value.slice(e.lastValue.length);e.data=i(n),e.element.value=r(e.data)},this.observe(),this.enter("initialized"),this.trigger(a.READY)}},{key:"observe",value:function(){var e=this;t.compose(r.bindEvent({type:"keydown",handler:function(t){8===(t.keyCode||t.which)&&(e._hasBackspace=!0),e.lastValue=t.target.value}}),r.bindEvent({type:"input",handler:this.onChange}))(this.element),this.hasObserve=!0}},{key:"unObserve",value:function(){this.hasObserve&&(r.removeEvent("input",this.element),this.hasObserve=!1)}},{key:"match",value:function(e){switch(e){default:return{type:e,blocks:this.options.blocks,delimiter:this.options.delimiter};case"time":return{type:e,delimiter:":",blocks:[2,2],format:this.options.hours};case"card":return{type:e,delimiter:" ",blocks:[4,4,4,4]};case"date":return{type:e,delimiter:"/",blocks:[4,2,2]}}}},{key:"bind",value:function(){var e=this;t.compose.apply(void 0,d([{type:this.eventName("touch"),handler:function(){return!1}},{type:this.eventName("click"),handler:function(){return!1}},{type:this.eventName("focus.keyboard"),handler:function(){return e.trigger(a.FOCUS)}},{type:this.eventName("blur.keyboard"),handler:function(){return e.trigger(a.BLUR)}}].map(function(e){return r.bindEvent(e)})))(this.element)}},{key:"unbind",value:function(){r.removeEvent(this.eventName()),this.unObserve()}},{key:"enable",value:function(){this.is("disabled")&&this.leave("disabled"),this.trigger(a.ENABLE)}},{key:"disable",value:function(){this.is("disabled")||this.enter("disabled"),this.trigger(a.DISABLE)}},{key:"destroy",value:function(){this.is("initialized")&&(this.unbind(),this.leave("initialized")),this.trigger(a.DESTROY),function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"destroy",this).call(this)}}]),u}())||o)||o)||o)||o;e.default=P,Object.defineProperty(e,"__esModule",{value:!0})});
